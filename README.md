絶対投資するな！？レバレッジ・インデックスETFをpythonで考察してみた結果...

# 超短い結論
レバレッジ・インデックスETFは超割のいい宝くじ。適切に運用しよう。全ぶっ放するのはNG

# はじめに
僕が投資先を選定する上でレバレッジ・インデックスETF（以後レバレッジETF）に出会い。この記事はレバレッジETFが危険と言われるのはどうしても信じられなかったので自分で検証した記事です。

僕は俗にあるレバレッジETFの特性は勘違いによって生まれていると思います。そこで、この記事を通してレバレッジETFの強みと弱みを”統計的”な側面から客観的に見ていただきたいという思いを込めて書いています。ぜひ、この機会にレバレッジETFの世界を一緒に眺めて見ませんか？きっと面白く思えるはずです。ただし、

*あくまで投資は自己判断で。*

申し訳ありませんが、僕は皆様のお金に責任は持てませんのでご注意ください。信じるも信じないも皆様次第です。

では、サッソク見て行きましょう！！！

# 背景
昨今の暴落もあり投資が注目を集めてる気がします。しかし、個別株はかなり知識がないと厳しそうです。非証券マンなエンジニアにはそれはきつい。
そこで、何か、簡単に投資できて利回りが良いもの追い求めた結果たどり着いたのが「レバレッジETF」です。
レバレッジETFとは、何か参考となる株価に対してレバレッジ、つまり倍率をかけた株価になるように動く証券です。例えば、日経225の2倍レバレッジETFは日経225の株価の2倍の株価に連動して動きます。

要は、100万円日経225に投資する代わりに2倍レバレッジETFに投資すれば200万円日経225に投資したのと同じような効果を得られるということです。ただし、借金して100万円を200万円にしてるわけじゃないので、仮に日経225が0円になってもレバレッジETFに投資した100万円が0円になるだけで、借金をこさえる心配はありません。

ここだけ聞くと青天井が2倍で下が同じに見えるので最高の証券にも見えるのですが、そんな甘い話じゃないんですね。レバレッジETFには様々な人が様々な立場で話しています。

以下に立場別にいくつかリンクをご紹介します。


- 否定
    -  [マネーの手帳　レバレッジ型ETFの投資で知っておくべき特徴やリスクをまとめました](https://www.crowdport.jp/money-notebook/833/#:~:text=%E3%83%AC%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8%E5%9E%8BETF%E3%81%A8%E3%81%AF%E3%80%81%E6%9D%B1%E8%A8%BC1%E9%83%A8%E3%81%AB%E4%B8%8A%E5%A0%B4,%E3%81%99%E3%82%8B%E4%B8%8A%E5%A0%B4%E6%8A%95%E8%B3%87%E4%BF%A1%E8%A8%97%E3%81%A7%E3%81%99%E3%80%82)
    - [高橋ダン様 【騙されるな】買ってはいけない金融商品？](https://www.youtube.com/watch?v=ecxP6wCQrQg)
    - [両学長　第40回 お手軽に莫大な利益を得る方法。レバレッジETFはアリか？【お金の勉強 株式投資編】](https://youtu.be/oRei15CZG14)
- 肯定
    - [rokohouse様 超低リスクで2億円を手にするレバレッジETFによる超長期投資法とは？](http://www.rokohouse.net/archives/2312)


>### リンク先記事補足
>否定派はyoutubeの動画が2件になってしまいました。普通のWEB記事にも多かった印象があるんですが、探そうと思うと見つからないもんです。もう1つのサイトもじゃっかん否定的ですが中立的です。どれも指数からの乖離などを説明する典型的な説明をなさっていると思います。
> 一応言っておくと、両学長さんもダン高橋さんも非常に知己に富んだ情報を発信してくれる方々です。発信者としては両名ともにおすすめできる方です。お二方の動画を上げたのは僕が見て記憶に新しかっただけです。
> 肯定派に上げたrokohouseさんの記事もどれも良記事です。ぼくと同じで統計的な性質に重きを置くエンジニアの方のようです。実は今書いている記事を書くまで存じ上げなかったのですが、周辺調査をする最中に発見し大体読ませていただきました。正直、rokohouseさんの記事読んでいれば、このQiitaの記事はそこまで差はないと思います。一応差分を作ったつもりではありますが。

僕はレバレッジETFについては肯定派よりだと思います。なぜなら、否定派の説明は数学的に考えて理屈に合わないと思うからです。では、その理屈と僕の納得が行かない理由を見ていきます。

## 否定派の理由
### レバレッジETFは日々の株価の動きにレバレッジをかけているので指数から乖離する
レバレッジの投資商品はいくつもあり、有名所だとFXが上げられると思いますが、レバレッジETFはFXと大きくことなるのが*前日比*に対してレバレッジをかけていることです。
この仕組の直感的でない(?)ところが原因で、例えば

> 10年でS&P500の株価が100%増加した => レバレッジ3倍S&PETFは300%増加した

は成り立ちません。「おいおい日経225の2倍で動くとかさっき自分で説明してたじゃん」と思った方。鋭いです。しかし、「あれは嘘だ」。ただ、同時に近似的には正解なんです。厳密には違うというだけ。

細かいことを言えば、レバレッジETFの増加分は元となる株価の倍数よりも小さかったり大きかったりするのです。
もう一度になりますが、それは、レバレッジETFの価格は元となる株価の1日よりも長い時間に対する価格変動に単純に倍数をかけただけの動きを保証しないからです。

しかし、本当に問題になるほど乖離するのでしょうか？

では株価変動の様子を実例で見ていきましょう。

例えば、2012/4/2-2020/4/2の動きで、SP500[^1]”先物”[^2]は1.81倍に、対してSP500の3倍レバレッジETFであるSPXLは3.47倍です。単純な計算であれば 1+0.81*3 = 3.43倍なので、少し単純計算よりも儲けが多いです。 しかし、まぁ誤差の範囲内でしょう。

[^1]: SP500はアメリカの株式の代表的な株価指数です。最近はこれを買っておけって意見がほとんどですね。
[^2]: あえて”先物”と書きましたが、SPXLは先物の3倍の値動きを目指すものなので先物を指標に使いました。ただ、先物も現物もめちゃくちゃ値動きが異なるということはないので先物でも現物でも大した差はないです。現物は例示の機関で1.74倍になってました。

このように確かにレバレッジETFは日々の価格に対して”しか”倍率をかけていませんが、それってあまり問題ではないんですね。

Qiitaらしく数学的な話をするならこれは高校でならう近似式のお話そのもです。 $r_i << 1$である$r_i$について次の近似式が成り立ちます。

```math
\prod_{i=1}^{N} (1+r_i) \simeq 1 + \sum_{i=1}^{N} r_i
```

この式が示すのは、「1%上昇、1.5%上昇、0.5%下降した価格はおおよそ2%(=1+1.5-0.5)上昇になるよ」という至って直感的な話です。

つまり、価格変動が1よりも十分に小さいといえる範囲（数％）ならばその変動率を足し算した変化率が全体の変化率とほぼ言えるのです。SP500などの指数は暴落時などを除けば1%以内の動きで収まります。となれば、この近似式が成り立つので長期で見てもそこまで乖離することはないのですね。

まとめると、日々の価格変動にしか倍率をかけていないからと行って全体の指数がハチャメチャになるかというとそんなことはなくないということです。近似的には全体でも倍率をかけた株価になってくれます。

### レンジ相場に弱い

レンジ相場とは上げて戻して上げて戻してとジグザグして全体としては上昇も下降もしない相場のことを言います。

仮にレバレッジETFが元とする指数が「-5%, +5%, -5%, +5%」と動くときは3倍のレバレッジETFは「-15%, +15%, -15%, +15%」となります。両方の最終的な株価の変動率を計算してみると

```math
origin:          0.95 \times 1.05 \times 0.95 \times 1.05 = 0.995
3倍レバレッジETF: 0.85 \times 1.15 \times 0.85 \times 1.15 = 0.956 
```

とこのように、レンジ相場にも関わらずレバレッジETFの方がより下落幅が大きくなるので、多くの場合、この減少を「レバレッジETFの原価効果」といい、「レバレッジETFはレンジ相場に弱い」と言われています。

たしかに3倍レバレッジETFの方が下がりが大きいし、それは3倍どころではありません。

ここでも数式のモデルを使って見ましょう。レンジ相場を$r$と$-r$の変化率の繰り返しと定義し、$2N$日後の株価を考えるものとします。このとき$r^3 << 1$で無視できるものとします。すると、以下の近似式が成り立つのです。

```math
2N日後の価格の比 = (1+r)^N (1-r)^N = 1 - Nr^2
```

さきほどの例で言えば\$r = 5%\$なので　\$2 \times 0.05^2 = 0.005\$と下落幅ピタリですね。では、レバレッジETFはどうかというと、この変動率\$r\$に倍率Lをかけるだけなので

```math
2N日後のレバレッジETFの価格の比 = (1+Lr)^N (1-Lr)^N = 1 - N(Lr)^2
```

単純ですね。ただし、$L$の2乗で効いてくるのがポイントです。先程の例で言うなら、$2 \times (3 \times 0.05)^2 = 0.045$です。下落幅は3倍じゃなくて、9倍だったんですね！。

というように、レンジ相場での下落幅は倍率の2乗で効くことがわかりました。恐ろしいですねー。

ただし、思いおこしてほしいのが、$r^2$ってそもそも小さくないか？ということです。
今回は5%の例を上げましたが、日々の動きが5%の指数って結構荒れてます。普通は1％くらいです。
つまり$r^2$自体が結構無視できる程度の変化率なのかなと思います。1万分の1ですからね。

ただし、暴落時のV時回復は別です。今回のコロナ暴落もそうですが、値動きが激しいレンジは$r^2$の効果がでるでしょう。実際、今回のコロナ暴落で米国株はほぼ元の価格に2020/6/27現在で戻っていますが、レバレッジETFはその限りではありません(SP500は2月のピークから-10%程度、対して、3倍レバレッジETFのSPXLは-47%)。この点は注意が必要です。ただ、3月からここまで120日程度あるので、$Nr^2 = 0.1$となり、$9* Nr^2 = 0.9$のはずですが、そこまでの下落ではないので、モデルが単純過ぎた結果なのかモデルほどの酷さはないようです。そもそも、毎日同じ変動率なのは変ですからね。そういうところから来る誤差だと思います。

この項でお伝えしたかったのは、一般に言うレバレッジETFの原価効果は何もレバレッジETFにのみに存在する効果ではなく、レバレッジによって増強される程度は高々$(Lr)^2$であるということです。$r$が小さければほとんど問題になりません。

## 肯定できる理由
### 期待値を上げる効果が期待できる
そもそもSP500などに投資する目的って多くが「長期投資すれば”必ず”儲かる」からなんです。このあとちゃんと検証もしますが、たしかにSP500は長期間持つことでほとんど損失することなく利益を得ることができます。

ここで少し話を変えてみましょう。

例えば、ここにお金を入れると必ず2倍に増えてお金がでる装置があったとします。この装置は3回だけ使えるとしましょう。そんな装置があったら、どうします？

僕ならこうします。まず銀行に行ってこの装置の説明をします。そこからありとあらゆる自分の資産を担保に極限までお金を借りて、そのお金を装置に入れます。出てきたお金はもう一度通します。また、もう一度通します。こうすることで例えば、1億円借りられれば大体7億円利益が得られます。やべー。今手元にあるお金が100万円しかなければ、利益は700万円ですから、その差は圧倒的です。

つまりです。必ず儲かる仕組みがあるなら借金をしてでもやるべきなんです。

話を戻します。

SP500に投資するときは「長期投資すれば”必ず”儲かる」から投資するのでした。ここでいう長期投資はよく言うのは20年くらい。この長期投資ができる回数って大体の人にとって3回くらいですかね。

そうです。本質的には先程の装置の例えとそこまで変わりません。お金を入れてからでるまで20年かかるだけです。（そこが1番の問題ですが）

なので、借金をしてでも投資する、レバレッジETFにはそういう意味で合理性があるといえると思います。

ただ、ここまでは定性的な話でした。数式でも見ていきましょう。

#### 数式で検証してみる

ある証券Aの20年後に得られる価格変動率を確率変数$R$とします。　では、そのAの$L$倍のレバレッジETFについてその平均値と分散を考えて見ましょう。しかし、これは簡単ですね。

```math
レバレッジETFの平均値 = L \times E[R]
レバレッジETFの分散 = L^2 \times VAR[R]
```

つまり、レバレッジETFは得られる期待値を$L$倍して分散も$L^2$します。例えば、必ず儲かるマシンの話なら$VAR[R]$はそもそも0なので、期待値を上げる効果だけが作用してお得だった訳です。

しかし、実際の長期投資はそういうわけではありません。期待値を上回る利益の方向にも逆に下回る方向にも分散があります。問題になるのは、もちろん下回る方向の分散です。上回ってくれる分には何も文句がありませんからね。

しかし、こればっかりは何もフォローの仕様がありません。調べてわかったことでもありますが、きちんと損する可能性が生まれてしまうくらいには下方向の分散を大きくしています。SP500に投資している分には必ず儲かるのに、その*レバレッジETFでは、無価値化する場合が出始める程度には危険度が増します*。

無価値化するというのは想像異常に危険で、半値程度ならそのあと倍以上に上がってくれれば這い上がれるのですが、本当に0になってしまうと何をかけても0なので救いようがないわけです。実はこれを救う方法もあるのですが、あとに書きますね。

危険度の話ばかりフォーカスしましたが、利益の面で強調したいのは*期待値や中央値という尺度では明らかにレバレッジを効かせた方が良い利益をもたらす*こともわかりました。しっかり式通りの性質があるのですね。

しかも、無価値化すると怖いことを書きましたが、その確率は1%とかそこらです。十分すぎるくらい大きいと個人的には思いますが、繰り返しますが、期待値や中央値はきちんと良くなってます。

実際のところ、否定派の理由として使うなら「無価値化する確率が少なからずあること」ここを十分に指摘するべきだと僕は思います。自分が100個の独立な世界線を生きれる量子的な存在ならいいですけど、そんなんじゃないですからねｗ。1%の確率でも分だら死ぬならやりたくないわけです。

# 検証

さぁ、なが～いプロローグでしたが、やっと本題の検証です。以上の事前検証からわかるのはレバレッジETFのリスクとメリットを定量的に測ること。これを歴史的なデータから定量的にやることだと考えました。

考察するにあたりある程度前提をご紹介します。

## 対象
- S&P500
- NASDAQ100

個人的に好きなインデックスです。おそらく多くの人が知っていて投資したいインデックスだと思います。S&P500に関しては100年程度分のデータが手に入ったのでかなり良い統計量が与えられそうです。

## 想定ストーリー
### もしリーマンショック以前にレバレッジETFがあったら
### 今買ったETF５年後どうなってる？
### 過去に５年間積立投資していたら統計的にどうだった？
# 結論
## レバレッジETFの危険性
### 無価値化する可能性がある

## レバレッジETFのすごい所
### 期待値4倍！？

# まとめ
## レバレッジETFは博打的な投資
インデックスに投資するメリットとしてほぼほぼ無価値化することはありえないことが上げられます。
しかし、見てきた通りレバレッジETFはその可能性が普通にあります。約2割…。

## でもやっぱり利益も多い
しかし、最初にも述べた通り統計的には期待値が正ならレバレッジを効かせるのは期待値を上乗せする意味で理屈上はいいことのはずです。（一時の下がりを気にしない仏の心があれば）
実際今回の検証でも利回りの期待値は参考にしたインデックスに比べ圧倒的です。
NISA枠でも数千万円の利回り狙えるってやばい。

## バブル疑惑
検証内容からは外れますが、アメリカのインデックスはバブルの傾向があるのは明らかな傾向だと思います。
最近の「とりあえずSP500に投資」の流れは仮想通貨にもあった「BTCよく知らないけど買う」に近い流れを感じます。
一つ注意したいのは、*今回の検証もこのバブル傾向に強く影響された検証*です。
ただ、バブルとは言いましたが、本当にバブルかは弾けてみないとわからないのがバブルです。
最近の金融緩和の流れは明らかに歴史上異常なことです。
そのなかで証券の価格が下がるのも確かに難しいかもしれないです。

# 要するに

今回扱った米国インデックスのレバレッジETFは安定して期待値

# 最後に：投資は自己判断で！

長文お読みくださり、ありがとうございました！

# おまけ: 復元抽出で未来をシミュレートする